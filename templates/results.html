{% extends "base.html" %}

{% block content %}
        <h1>Voting Results</h1>

        <p class="subtitle">
            ðŸ—³ <strong>{{ total_votes }}</strong> of <strong>{{ max_votes }}</strong> travelers have cast their vote
        </p>

        {% if total_votes == 0 %}
        <div class="alert alert-error">
            <strong>No votes yet</strong>
        </div>
        {% else %}
        <table class="results-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Destination</th>
                    <th>1st Choice</th>
                    <th>2nd Choice</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                <tr>
                    <td><strong>{{ loop.index }}</strong></td>
                    <td>
                        <strong>{{ result.destination }}</strong>
                        {% if result.by %}
                        <br><small style="color: #888; font-size: 13px;">{{ result.by }}</small>
                        {% endif %}
                    </td>
                    <td>{{ result.first_choice_votes }} <span style="color: #888;">({{ result.first_choice_votes * 2 }} pts)</span></td>
                    <td>{{ result.second_choice_votes }} <span style="color: #888;">({{ result.second_choice_votes * 1 }} pt)</span></td>
                    <td><strong style="font-size: 20px; color: var(--terracotta);">{{ result.total_score }}</strong></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>


        {% endif %}

        <div class="nav-container">
            <a href="{{ url_for('index') }}" class="back-link">Cast Your Vote</a>
        </div>
{% endblock %}
